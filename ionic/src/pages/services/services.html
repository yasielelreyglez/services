<ion-header>
    <app-header> </app-header>
</ion-header>


<ion-content padding>
    <ion-refresher (ionRefresh)="doRefresh($event)">
        <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="Pull to refresh" refreshingSpinner="circles" refreshingText="Actualizando...">
        </ion-refresher-content>
    </ion-refresher>
    <ion-label text-center color="azul-claro">Lista de servicios</ion-label>

    <hr class="hr-separador">

    <!--<ion-label color="azul-claro">Filtrar por</ion-label>-->
    <ion-list>
        <ion-item>
            <ion-select [selectOptions]="citiestOptions" name="filter_city" [(ngModel)]="city" placeholder="Selecciona una ciudad">>
                <ion-option *ngFor="let c of cities" [value]="c.title">{{c.title}}</ion-option>
            </ion-select>
        </ion-item>

        <ion-item>
            <ion-select [selectOptions]="catOptions" name="filter_category" [(ngModel)]="category" placeholder="Selecciona una Categoria">>
                <ion-option *ngFor="let c of categories" [value]="c.title">{{c.title}}</ion-option>
            </ion-select>
        </ion-item>
        <ion-item>
            <ion-input type="text" placeholder="Escriba la distancia en Kms"></ion-input>
        </ion-item>
        <ion-item>

            <button (tap)="filterService()" padding block ion-button>

       Filtrar
      </button>
        </ion-item>


    </ion-list>
    <ion-grid no-padding>
        <ion-row>
            <ion-col col-2>
                <p class="azul-claro" *ngIf="city || category">Filtros:</p>
            </ion-col>
            <ion-col col-10>
                <div *ngIf="city" class="inline-b">
                    <ion-chip>
                        <button ion-button color="danger" (tap)="deleteCity()">
                        <ion-icon  name="close"></ion-icon>
                      </button> &nbsp;
                        <ion-label>{{city}}</ion-label>
                    </ion-chip>
                </div>

                <div *ngIf="category" class="inline-b">
                    <ion-chip>
                        <button ion-button color="danger" (tap)="deleteCategory()">
                        <ion-icon  name="close"></ion-icon>
                      </button> &nbsp;
                        <ion-label>{{category}}</ion-label>
                    </ion-chip>

                </div>

            </ion-col>
        </ion-row>
    </ion-grid>



    <ion-list>
        <ion-item *ngFor="let serv of services; let i = index">
            <ion-grid>
                <ion-row>
                    <ion-col col-4>
                        <img (tap)="viewImg(serv.icon)" [src]="serv.icon ? serv.icon : 'assets/imgs/service_img.png' ">
                    </ion-col>

                    <ion-col col-8>
                        <h2 class="serv-title ">{{serv.title }} </h2>
                        <div class="text-center fw-600 serv-pro" *ngIf="serv.professional === 1">
                            <p class="texto" style>PRO</p>
                        </div>
                        <hr class="hr-separador">
                        <ion-row>
                            <ion-col col-7>

                                <p>Calificaci√≥n: {{serv.globalrate}}/10</p>
                                <p>Distancia: 5 km</p>
                            </ion-col>
                            <ion-col col-5>
                                <ion-icon float-right class="fs-40" (tap)="toogleFavorite(i,serv.id)" *ngIf="loggedIn" name="heart" [color]="serv.favorite ? 'favorite_on' : 'favorite_off'"></ion-icon>
                            </ion-col>
                        </ion-row>
                        <ion-row class="pt--12" no-padding>
                            <ion-col col-5>
                                <p> Categoria:</p>
                            </ion-col>
                            <ion-col col-7>
                                <p text-wrap><span *ngFor="let cat of serv.subcategoriesList; let i = index">
                                <ng-container *ngIf="i > 0; else elseTemplate">
                                   ,{{ cat.title}}
                                </ng-container>
                                <ng-template #elseTemplate>
                                   {{ cat.title}}
                                </ng-template>
                             </span>
                                </p>
                            </ion-col>
                        </ion-row>

                    </ion-col>

                </ion-row>

                <ion-row>
                    <ion-col col-6>
                        <button ion-button full color="azul-claro" (tap)='openServicePage(serv.id,i)'>
                  <ion-icon name="checkmark"></ion-icon>&nbsp;Visualizar
                </button>
                    </ion-col>
                    <ion-col col-6>
                        <button (tap)="showPromptDenuncia(serv.id)" ion-button full color="danger">
                  <ion-icon name="microphone"></ion-icon>&nbsp;Denunciar
                </button>
                    </ion-col>
                </ion-row>
            </ion-grid>
            <hr class="hr-separador">
        </ion-item>
    </ion-list>
</ion-content>