<ion-header>
  <app-header></app-header>
</ion-header>

<ion-content padding>
  <ng-container *ngIf="!connetionDown; else elseTemplate">
    <ion-searchbar id="search" (ionInput)="onInput($event)" (ionClear)="onCancel($event)"
                   (keypress)="goSearch($event.keyCode)" placeholder="¿Que buscas?" #search></ion-searchbar>
    <ng-container *ngIf="busqueda; else topCategories">
      <p *ngIf="noFound">No hay resultados </p>
      <ion-list>
        <ion-item *ngFor="let serv of services; let i = index">
          <ion-grid>
            <ion-row>
              <ion-col col-4>
                <!-- <ion-thumbnail item-start> -->
                <ng-container *ngIf="serv.icon; else imgTemplate">
                  <img (tap)="viewImg(serv.icon)" src="{{baseUrl + serv.icon}}">
                </ng-container>
                <ng-template #imgTemplate>
                  <img (tap)="viewImg(assets/imgs/service_img.png)" src="assets/imgs/service_img.png">
                </ng-template>
                <!-- </ion-thumbnail> -->
              </ion-col>

              <ion-col col-8>
                <h2 class="serv-title ">{{serv.title }} </h2>
                <div class="text-center fw-600 serv-pro">
                  <p class="texto" style>PRO</p>
                </div>
                <hr class="hr-separador">
                <ion-row>
                  <ion-col>

                    <p>Calificación: {{serv.globalrate}}/10</p>
                    <p>Distancia: 5 km</p>
                    <p>Categoria: Hogar</p>
                  </ion-col>

                </ion-row>
              </ion-col>

            </ion-row>

            <ion-row>
              <ion-col col-12>
                <button ion-button full color="azul-claro" (tap)='openServicePage(serv.id)'>
                  <ion-icon name="checkmark"></ion-icon>&nbsp;Visualizar
                </button>
              </ion-col>

            </ion-row>
          </ion-grid>

        </ion-item>

      </ion-list>
    </ng-container>

  </ng-container>

  <ng-template #elseTemplate>
    <ion-label text-center color="danger">NO HAY CONEXION CON EL SERVIDOR</ion-label>

    <button color="azul-claro" ion-button block margin-bottom="2" (tap)="reConnect()">
      Reintentar
    </button>
  </ng-template>
  <ng-template #topCategories>

    <ion-label text-center color="azul-claro">Principales tendencias</ion-label>
    <ion-list>
      <button *ngFor="let sub of subCategories" class="btn-text-left" text-left color="azul-claro" ion-button block
              margin-bottom="1" (tap)='openServicesPage(sub.id)'>
        <img src="{{baseUrl + sub.icon}}" alt="" height="36">
        &nbsp;{{sub.title}}
      </button>

    </ion-list>

    <ion-grid>
      <ion-row>
        <ion-col>

        </ion-col>
        <ion-col col-10>
          <button color="azul-oscuro" class="btn-text-left" ion-button block margin-bottom="2"
                  (tap)="openCategoriesPage()">
            <ion-icon name="search" class="fs-25"></ion-icon>
            &nbsp;Buscar por categoria
          </button>
        </ion-col>
        <ion-col>

        </ion-col>
      </ion-row>

    </ion-grid>


    <p *ngIf=loggedIn>esta logueado</p>
    <p *ngIf=!loggedIn>No esta logueado</p>

  </ng-template>
</ion-content>
